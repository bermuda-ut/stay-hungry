<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>memcheck(sanmu); This website; concept, design, development, iteration.</title>
    <link rel="stylesheet" href="/app-blog.css">
    <script src="/app-blog.js"></script>
    <script src="/vendor.js"></script>
    <script src="/posts/0.js"></script>
    <script>require('mss/module-injector');</script>
</head>

<body>
<div id="header" class="module module-header">
    <div class="empty-header"></div>
</div>

<div class="container">
    <h1 class="inverse">
        This website; concept, design, development, iteration.
    </h1>
    <small>31 Dec 2017</small>

    <div class="justify post">
        <h2>
            <span class="hover-action">
                <span class="fadein absolute">How fucking brilliant I was</span>
                <span class="fadeout">Baby-steps in Blogging</span>
            </span>
        </h2>
        <p>My first blogging started back in 2010, when my uncle suggested creating one after he realized how much of a
            nerd I was (or rather, he saw the value in a naive kid trying out whole bunch of things).
            This resulted in <a target="_blank" href="https://imnotbermuda.com">imnotbermuda.com</a>.
            My goal back then was simple - write stuff that I do to gain more cookie points in my university
            applications. And it did work, I got successful interview invites from big universities around the world
            like University of Cambridge, Imperial College London, University of Melbourne and so on..
        </p>

        <p>But there was more than that, something more valuable.</p>

        <p>My Dota-related posts took off and gained a fan base (where, I meet really cool people.. You know who you
            are). I started posting for an audience rather than for myself. This made me grow some love and interest in
            sharing information or perspectives to people.</p>

        <p>But the old blog has finished serving it's purpose and revamping it would just take too long (plus, I was
            never happy with Wordpress hosting my things).</p>

        <hr>

        <h2>Website design principles and concepts</h2>
        <p>There were a couple of core ideas that were the pillars of this website from the start.</p>
        <h3>Minimal JS and CSS</h3>
        <p>There are three things that were the core concepts from the start - simple, elegant and <i>fast</i> - just
            like any other 2017 web development company aims for. This meant, in my head, liberating myself from any
            other web frameworks and write things dedicated for my website. The challenge I had was writing things that
            replaced things that I got so used to, such as Bootstrap CSS or some npm packages, but keeping the modern
            websites' "responsiveness".</p>

        <h3>Easy to Update</h3>
        <p>I knew I would never be bothered updating the website if updating the website was tedious. By making the
            website easy to update, it makes small-incremental updates practically possible. <i>Iterative</i> and
            <i>Agile</i> development.. <span id="click-action-4">Am I right?</span></p>

        <h3>Multiplayer Game</h3>
        <p>My roots of programming sprouted from game development and I wanted something that reflects my passion. Plus,
            creating some workarounds around the limitation of not having UDP connection in client browsers sounded like
            a lot of potential learning.</p>

        <h3>Readers First</h3>
        <p>My old blog is an absolute <i>bitch</i> to read anything. I wanted a clean and elegant website where
            readers could focus on the content, without any cool gimmicks (ie. distractions).</p>

        <h3>Free Hosting</h3>
        <p>I just finished being a student and that means I am still as poor as a student.</p>

        <div class="hover-action">
            <div class="fadein">
                <h3>Hidden Content</h3>

                <p>Because, it would be boring and exactly the same otherwise. I wanted an unique, personalized
                    experience for every readers out there.
                    I believe the pinnacle of art is bringing the audience to the stage and let one discover the true
                    meanings and purpose behind the art, rather than going down the scripted path like average books and
                    movies.</p>

                <p>We live in a world where the interactive medium - video games - has gone mainstream. It is about time
                    for other content channels to learn and adopt the advantages of games as an art medium.</p>

                <p>Hidden content also means 'reward' for the
                    <del>player</del>
                    reader. There is nothing more satisfying
                    than finding well-hidden content after a long intended search. There is nothing more refreshing than
                    a randomly-stumbled-upon content that <b>might</b> be tailored for you..
                </p>

                <p id="click-action-1">No, it's not a gimmick. It is true art.</p>

                <p id="click-action-5">It may hinder "Readability", but I am sure readers will figure it out.</p>
            </div>
        </div>

        <hr>

        <h2>Development</h2>
        <p>
            <span class="hover-action">
                <span id="random-0" class="fadein absolute">
                    And this is why some commerce kids hate me.
                </span>
                <span class="fadeout relative">
                    Anyone can talk shit and come up with pretty words and idealistic phrases.
                </span>
            </span>
            How did I actually deliver them?</p>

        <h3 id="click-action-0">Liberating myself from Frameworks and Packages</h3>

        <p>Normally, I won't be bothered researching and go for mainstream frameworks like Rails or Meteor for any
            websites.
            This was not going to work - they are heavy to host for free and their framework is too much
            of an overkill for a simple blog.</p>

        <p>I was not a huge fan of creating dependencies on other packages either.
            This was no big project that required a huge black box that potentially leads to a bloated (in both size and
            speed) solution.
            The main question was, how long was it going to take? I had no clue since I had never done anything serious
            from scratch when it came to building websites.</p>

        <p>However, I agreed with the idea of transpiling CSS and JS to minify or optimize the code for production.
            This did not mean that I was a huge fan of traditional Gulp, Browserify or Grunt.
            They were all in my eyes a pile of over-engineered disaster that will never be touched for my projects -
            both at home and at work.</p>

        <p>An elegant solution appeared after a short research.
            <a href="http://brunch.io">Brunch</a> has a super easy setup, simple config and most importantly,
            <b>incremental builds</b>.
            Yes, it is still a pile of steaming dependencies to worry about but it is purely a build tool - none of
            these packages will actually make it to the end-users. It is great, just look at my config file:</p>

        <pre class="code">
<code>exports.files = {</code>
<code>    javascripts: {</code>
<code>        joinTo: {</code>
<code>            'vendor.js': /^(?!app)/,</code>
<code>            'app-blog.js': [</code>
<code>                'app/mss/*.js',</code>
<code>            ],</code>
<code>            'app-game.js': [</code>
<code>                'app/mss/*.js',</code>
<code>                'app/mss-game/*.js',</code>
<code>            ],</code>
<code>        }</code>
<code>    },</code>
<code>    stylesheets: {</code>
<code>        joinTo: {</code>
<code>            'app-blog.css': [</code>
<code>                'app/css/font.css',</code>
<code>                'app/css/blog.css',</code>
<code>            ],</code>
<code>            'app-game.css': [</code>
<code>                'app/css/font.css',</code>
<code>                'app/css/game.css',</code>
<code>            ],</code>
<code>        }</code>
<code>    },</code>
<code>};</code>
<code></code>
<code>exports.paths = {</code>
<code>    public: "public"</code>
<code>};</code>
<code></code>
<code>exports.plugins = {</code>
<code>    babel: {</code>
<code>        presets: ['latest']</code>
<code>    },</code>
<code>    cssnano: {</code>
<code>        autoprefixer: {</code>
<code>            add: true</code>
<code>        }</code>
<code>    },</code>
<code>    uglify: {</code>
<code>        mangle: true,</code>
<code>        compress: {</code>
<code>            global_defs: {</code>
<code>                DEBUG: false</code>
<code>            }</code>
<code>        }</code>
<code>    }</code>
<code>};</code>
</pre>

        <p>It <i>could</i> be simplified and made shorter but I am already happy with above and concluded sinking time
            further on optimizing the config file is not worth it compared to writing code that is actually delivered
            to the end-user.
            <span id="click-action-2">
                Besides, this is already heavenly compared to some shit syntax and convoluted semantics in other
                transpilers.
            </span>
        </p>

        <p>Anyway, this was the best choice I have made in the project. Writing my own things to do simple things was
            much faster than searching and learning random npm packages.
            <span class="hover-action">
                <span class="fadein absolute">&nbsp;(some packages were clearly made by <i>web developers</i>)</span>
            </span>
        </p>

        <h3 id="click-action-3">Design</h3>
        <p>I took a lot of inspiration<a id="ref-story" href="#story">*</a> from
            <a target="_blank" href="https://www.justinobeirne.com/">Justin O'Beirne</a>.
            I enjoyed the clean, professional look of the blog which was informative and readable.
            I took the core principles of that website and added a bit of my <span id="random-1">flavour</span> ;)</p>

        <p>Along with some handy text effects to mark off special sections or highlight important text,
            added little bit of interactivity in the website, as demonstrated in the
            <a href="/about.html">about page</a>.
            If I were to pitch this design concept with my business top hat, it would be "<i>More</i> information
            delivery by showing <i>Less</i>."</p>

        <h3>Hosting</h3>
        <p>Initial obvious choice was hosting on AWS - static website hosting on S3 storage.</p>

        <p>However, this would cost roughly $1-3 per month, and this was an absolute far away from ideal (it's a cup of
            coffee per month for God's sake!).
            Crazy drama aside, I looked around for truly cost-free solutions.</p>

        <p>I ended up settling down with GitHub pages - it was completely free to host my 'static' website and updating
            the website was just updating my GitHub repository - already configured! Less tedious tasks!</p>

        <p>Cloudflare was setup together to allow HTTPS connection with the end user as a work-around since GitHub pages
            only support HTTPS for non-custom domains. Note that this is truly is a <i>work-around</i>, as the
            encryption only occurs between Cloudflare servers and the user, not between Cloudflare and GitHub.
            Caching from Cloudflare was just a number of clicks and is not even worth mentioning here :P</p>

        <h3>The Game</h3>
        <p>Original plan was to use some existing package for rendering and core game components and mainly work on
            the networking part. However, my nerdy gamer inside wanted to build things from scratch and I ended up
            writing my own game-framework layer. It is no where near complete as of now but it sure does basic things
            like rendering and user input.</p>

        <p>Here is a quick summary of how it works.</p>

        <p>There is an event listener that updates an object upon key down and up. By this way, we can detect
            multiple key downs and ups every frame:</p>

        <pre class="code">
<code>const KEYDOWN = 'keydown';</code>
<code>let keyInputs = {};</code>
<code></code>
<code>document.addEventListener('DOMContentLoaded', () => {</code>
<code>    onkeydown = onkeyup = function (e) {</code>
<code>        keyInputs[e.keyCode] = e.type === KEYDOWN;</code>
<code>    };</code>
<code>});</code>
</pre>

        <p>This object is utilized every frame. A frame is called to be rendered like this (note that
            <code>waitTime</code> is idle time between frames and is calculated against target framerate):</p>

        <pre class="code">
<code>document.addEventListener('DOMContentLoaded', () => {</code>
<code>    ...</code>
<code></code>
<code>    setInterval(stepFrame, waitTime);</code>
<code></code>
<code>    ...</code>
<code>});</code>
</pre>

        <p>And what happens every frame?</p>

        <pre class="code">
<code>function stepFrame() {</code>
<code>    const currTime = performance.now();</code>
<code>    const diff = currTime - prevTime;</code>
<code>    let fps = 1000 / diff;</code>
<code></code>
<code>    handleInput();</code>
<code>    for (let k in entityInfo) {</code>
<code>        handleMovement(entityInfo[k], diff);</code>
<code>    }</code>
<code>    render(renderCanvas, ctx, player, mapinfo, mapdeco, fps, entityInfo);</code>
<code></code>
<code>    prevTime = currTime;</code>
<code>    prevFps = fps;</code>
<code>}</code>
</pre>

        <p><code>handleInput</code> is just a function where it checks the <code>keyInputs</code> object to see if
            specific buttons are pressed or not. Note that having just event listeners for <code>keyup</code> or
            <code>keydown</code> is not going to work - the inputs will run independently from framerate, which is not
            ideal.</p>

        <p>As of now, <code>stepFrame</code> runs a specific helper function <code>handleMovement</code> to run all the
            movement steps for entities in game (player inclusive). However, this is not ideal. I much prefer Unity's
            way of handling object's frame updates. My current plan is to switch to objects having <code>update</code>
            method tied into it, which will be run by <code>stepFrame</code>.</p>

        <p>So, how does rendering the map work?
            The main challenge was calculating which pixels to render then scale it to the screen size.
            In a nutshell, camera coordinate is the same as player coordinate (easily changeable), measure the offset of
            the screen width and cut off the part we do not need starting from top left, measure the pixels to render,
            render on canvas and adjust the width appropriately. The code is too much of a tl;dr, check it out on the
            repository (link below).</p>

        <h2>Iterations</h2>
        <p>Duh.</p>
        <h3>'Module' System</h3>
        <p>It is just a fancy word for my simple JS code that dynamically loads content to an empty div.
            There are many utilization around this, such as mimicking React behaviours, dynamic header and footers,
            and even proper blog templating.
            I ended up only using it in header and footers since I wanted to reduce JS code as much as possible.</p>
        <h3>Readability</h3>
        <p>I played around with different fonts, container size, font size, width, height and other weird CSS things.
            Result is this, I hope you feel comfortable reading my blog.</p>

        <div class="refer">
            <p id="story">
                <a target="_blank" href="https://www.youtube.com/watch?v=pLbmZT70rtA&feature=youtu.be&t=26m57s">
                    * Hey dude, it was really formative piece of work, and I took a lot of inspiration from it. I
                    am a creative individual. No idea is unique, it was just
                    <del>blatant copying</del>
                    an inspiration.
                </a> <a href="#ref-story">^</a>
            </p>
        </div>
    </div>
</div>

<div id="footer" class="module module-footer"></div>
</body>
